<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chabad House ERP</title>
    <!-- Bootstrap 3 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Chabad House ERP</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li id="navContactsLink" class="active"><a href="#" id="navContacts">Contacts</a></li>
                    <li id="navFormsLink"><a href="#" id="navForms">Forms</a></li>
                </ul>
                <div id="auth-section-nav" class="navbar-right" style="padding-top: 8px; padding-right: 15px;">
                     <button id="loginBtn" class="btn btn-success navbar-btn">Login with Google</button>
                     <div id="loggedInUserDiv" style="display:none;">
                        <p id="userDetails" class="navbar-text" style="margin-right: 10px;"></p>
                        <button id="logoutBtn" class="btn btn-danger navbar-btn">Logout</button>
                     </div>
                </div>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container" style="padding-top: 70px;"> <!-- Main content container -->

        <div id="contacts-module"> <!-- Renamed from contacts-section for clarity -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Contacts Management</h3>
                </div>
                <div class="panel-body">
                    <button type="button" id="sharePublicContactFormBtn" class="btn btn-info" style="margin-bottom: 15px;">Get Public "Add Contact" Form Link</button>
                    <form id="contactForm">
                        <h4>Add/Edit Contact</h4>
                        <input type="hidden" id="contactId">
                        <div class="form-group">
                            <label for="name">Name:</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" class="form-control" id="email">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone:</label>
                            <input type="tel" class="form-control" id="phone">
                        </div>
                        <button type="submit" class="btn btn-success">Save Contact</button>
                    </form>
                    <hr>
                    <h4>Contact List</h4>
                    <ul id="contactList" class="list-group">
                        <!-- Contacts will be listed here -->
                    </ul>
                </div>
            </div>
        </div>

        <div id="forms-module" style="display:none;"> <!-- Renamed from forms-section for clarity -->
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Forms Management</h3>
                </div>
                <div class="panel-body">
                    <div id="create-form-view">
                        <h4>Create New Form</h4>
                        <form id="formDefinitionForm">
                            <div class="form-group">
                                <input type="hidden" id="editingFormId"> <!-- Hidden field for form ID when editing -->
                                <label for="formTitle">Form Title:</label>
                                <input type="text" class="form-control" id="formTitle" required>
                            </div>
                            <h5>Form Fields:</h5>
                            <div id="formFieldsContainer">
                                <!-- Dynamic fields will be added here -->
                            </div>
                            <button type="button" id="addFormFieldBtn" class="btn btn-warning">Add Field</button>
                            <button type="submit" id="saveFormDefinitionBtn" class="btn btn-success" style="margin-left: 5px;">Save Form Definition</button>
                        </form>
                    </div>
                    <hr>
                    <div id="list-forms-view">
                        <h4>Available Forms</h4>
                        <ul id="formsList" class="list-group">
                            <!-- Forms will be listed here -->
                        </ul>
                    </div>

                    <div id="fill-form-view" style="display:none;" class="well">
                        <h4 id="fillFormTitle"></h4>
                        <form id="dynamicForm"></form>
                        <button id="backToFormsListBtn" class="btn btn-default">Back to Forms List</button>
                    </div>

                    <div id="view-submissions-view" style="display:none;" class="well">
                        <h4 id="submissionsViewTitle">Form Submissions</h4>
                        <ul id="submissionsList" class="list-group">
                            <!-- Submissions will be listed here -->
                        </ul>
                        <div id="submissionDetailView" style="display:none;" class="panel panel-default">
                            <div class="panel-heading">Submission Details:</div>
                            <div class="panel-body" id="submissionDetailContent"></div>
                            <div class="panel-footer">
                                <button id="backToSubmissionsListBtn" class="btn btn-default">Back to Submissions List</button>
                            </div>
                        </div>
                        <button id="backToFormsListFromSubmissionsBtn" class="btn btn-primary">Back to Forms List</button>
                    </div>
                </div>
            </div>
        </div>

    </div> <!-- /container -->

    <footer class="footer">
      <div class="container text-center">
        <p class="text-muted">&copy; 2025 Shebo Enterprises</p>
      </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script src="app.js"></script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Bootstrap 3 JS -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>
